(function(e){function t(t){for(var s,o,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},n=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"16f4":function(e,t,a){e.exports=a.p+"img/404.8b1bcd55.png"},"1a25":function(e,t,a){e.exports=a.p+"img/contact-book.a41643da.svg"},"1f3f":function(e,t,a){"use strict";var s=a("f3ce"),r=a.n(s);r.a},"309a":function(e,t,a){e.exports=a.p+"img/logout.16b3b3aa.svg"},"391f":function(e,t,a){"use strict";var s=a("e46a"),r=a.n(s);r.a},"487b":function(e,t,a){},"49f8":function(e,t,a){var s={"./en.json":"edd4","./fr.json":"f693"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="49f8"},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return xt}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("the-navbar"),a("transition",{attrs:{name:"slide-fade"}},[a("router-view")],1),a("switch-trad")],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isPathChat?e._e():s("div",{staticClass:"navbar"},[s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"navbar__img",attrs:{src:a("cf05"),alt:"logo-icon"}})]),s("div",[e.isAuth?e._e():s("router-link",{staticClass:"link",attrs:{to:"/login"}},[e._v(e._s(e.$t("button.login")))]),e.isAuth?e._e():s("router-link",{staticClass:"link",attrs:{to:"/Signup"}},[e._v(e._s(e.$t("button.signup")))]),e.isAuth?s("button",{staticClass:"link",on:{click:e.logout}},[e._v(" "+e._s(e.$t("button.logout"))+" ")]):e._e()],1)],1)},i=[],c=(a("b0c0"),a("5530")),l=a("2f62"),u={name:"Navbar",methods:{logout:function(){return this.redirectHome(),this.$store.commit("logout")},redirectHome:function(){return this.$router.push("/")}},computed:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["isAuth"])),{},{isPathChat:function(){return"Chat"===this.$route.name}})},d=u,m=(a("64f1"),a("2877")),p=Object(m["a"])(d,o,i,!1,null,"6b1411e6",null),f=p.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"switch__trad",class:{"switch__trad__top-right":!e.isFooter&&e.isPathChat,"switch__trad__bottom-right":e.isFooter&&!e.isPathChat}},[s("a",{staticClass:"switch__trad--en",on:{click:e.swithToEnglish}},[s("img",{staticClass:"switch__trad__icon",class:{"trad-active":!e.isActive},attrs:{src:a("6bf7"),alt:"Flag USA"}})]),s("a",{staticClass:"switch__trad--fr",on:{click:e.swithToFrench}},[s("img",{staticClass:"switch__trad__icon",class:{"trad-active":e.isActive},attrs:{src:a("9baf"),alt:"Flag FR"}})])])},_=[],g={data:function(){return{isActive:!1}},props:{isFooter:{type:Boolean,default:!0}},computed:{isPathChat:function(){return"Chat"===this.$route.name}},methods:{swithToEnglish:function(){this.$i18n.locale="en",this.switchActive()},swithToFrench:function(){this.$i18n.locale="fr",this.switchActive()},switchActive:function(){this.isActive=!this.isActive}}},v=g,C=(a("7ef8"),Object(m["a"])(v,h,_,!1,null,"e634055c",null)),b=C.exports,y={name:"App",data:function(){return{isActive:!0}},created:function(){this.$store.dispatch("autoLogin")},components:{"the-navbar":f,"switch-trad":b}},w=y,I=(a("7faf"),Object(m["a"])(w,r,n,!1,null,null,null)),$=I.exports,x=a("8c4f"),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("main",{staticClass:"hero"},[s("div",{staticClass:"hero__text"},[s("h3",[e._v(e._s(e.$t("homepage.communication")))]),s("h1",{domProps:{innerHTML:e._s(e.$t("homepage.header"))}}),s("p",[e._v(" "+e._s(e.$t("homepage.description"))+" ")]),s("router-link",{attrs:{to:"/signup"}},[s("button",{staticClass:"btn"},[e._v(e._s(e.$t("button.onboarding")))])])],1),s("img",{staticClass:"hero__img",attrs:{src:a("d737"),alt:"cloud girl"}})])])},k=[],O={name:"Homepage"},M=O,E=(a("1f3f"),Object(m["a"])(M,S,k,!1,null,"183dc2a7",null)),U=E.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("form",{staticClass:"container__form"},[a("div",{staticClass:"container__form__label"},[a("h2",[e._v(e._s(e.$t("signup.title")))])]),a("div",{staticClass:"container__form__photo"},[a("div",{staticClass:"container__form__photo__circle"},[a("img",{attrs:{src:e.profilePicDOM,alt:""}}),e.userData.profilePic?e._e():a("p",{staticClass:"container__form__photo__circle__label"},[e._v(" + Add photo "),a("br"),e._v(" here ")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"myFiles",staticClass:"container__form__photo__upload",attrs:{id:"file",name:"image",type:"file"},on:{change:e.onFileSelected}}),a("label",{staticClass:"container__form__photo__circle__error"},[e._v(" "+e._s(e.errors.first("image"))+" ")])])]),a("div",{staticClass:"container__form__input"},[a("div",{staticClass:"container__form__field container__form__input__appelation"},[a("div",{staticClass:"container__form__input__appelation__error"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.userData.name,expression:"userData.name"}],class:{error:e.errors.has("name")},attrs:{placeholder:e.$t("signup.placeholder.name"),name:"name",type:"text"},domProps:{value:e.userData.name},on:{input:function(t){t.target.composing||e.$set(e.userData,"name",t.target.value)}}}),a("label",{staticClass:"container__form__input__appelation__error__label"},[e._v(" "+e._s(e.errors.first("name"))+" ")])]),a("div",[a("div",{staticClass:"container__form__input__appelation__error"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.userData.surname,expression:"userData.surname"}],class:{error:e.errors.has("surname")},attrs:{placeholder:e.$t("signup.placeholder.surname"),name:"surname",type:"text"},domProps:{value:e.userData.surname},on:{input:function(t){t.target.composing||e.$set(e.userData,"surname",t.target.value)}}}),a("label",{staticClass:"container__form__input__appelation__error__label"},[e._v(" "+e._s(e.errors.first("surname"))+" ")])])])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|regex:^([0-9]+)$",expression:"'required|regex:^([0-9]+)$'"},{name:"model",rawName:"v-model",value:e.userData.phone,expression:"userData.phone"}],class:{error:e.phoneError},attrs:{placeholder:e.$t("signup.placeholder.phone"),name:"phone",type:"text"},domProps:{value:e.userData.phone},on:{input:function(t){t.target.composing||e.$set(e.userData,"phone",t.target.value)}}}),a("label",[e._v(" "+e._s(e.errors.first("phone"))+" ")])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"}],class:{error:e.emailError},attrs:{placeholder:e.$t("signup.placeholder.email"),name:"email",type:"text"},domProps:{value:e.userData.email},on:{input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}}),a("label",[e._v(" "+e._s(e.errors.first("email"))+" ")])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"},{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"}],class:{error:e.passwordError},attrs:{placeholder:e.$t("signup.placeholder.password"),name:"password",type:"text"},domProps:{value:e.userData.password},on:{input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}}),a("label",[e._v(" "+e._s(e.errors.first("password"))+" ")])])]),a("div",{staticClass:"container__form__btn"},[a("button",{staticClass:"btn",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.formSubmitted(t)}}},[e._v(" "+e._s(e.$t("button.signup"))+" ")])])])])},D=[],j=(a("45fc"),a("8aa5")),P=a.n(j),N={name:"Signup",data:function(){return{userData:{name:"",surname:"",email:"",phone:"",profilePic:null}}},computed:{profilePicDOM:function(){return this.userData.profilePic?this.userData.profilePic:a("dac7")},emailError:function(){return this.$validator.errors.items.some((function(e){return"email"===e.field&&"required"===e.rule}))},phoneError:function(){return this.$validator.errors.items.some((function(e){return"phone"===e.field&&"required"===e.rule}))},passwordError:function(){return this.$validator.errors.items.some((function(e){return"password"===e.field&&"required"===e.rule}))}},methods:{formSubmitted:function(){var e=this;this.$validator.validateAll().then((function(t){t?e.$store.dispatch("signup",e.userData):alert("Form not valid")}))},onFileSelected:function(e){var t=this,a=e.target.files[0],s=P.a.storage().ref("profile-pics/"+a.name),r=s.put(a);r.on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),(function(){r.snapshot.ref.getDownloadURL().then((function(e){t.userData.profilePic=e}))}))}}},L=N,q=(a("dfde"),Object(m["a"])(L,T,D,!1,null,"253c9eac",null)),A=q.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("form",{staticClass:"container__form"},[a("h2",[e._v("Please login")]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"}],class:{error:e.emailError},attrs:{placeholder:e.$t("login.placeholder.email"),name:"email",type:"text"},domProps:{value:e.userData.email},on:{input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}}),a("label",[e._v(" "+e._s(e.errors.first("email"))+" ")])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"},{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"}],class:{error:e.passwordError},attrs:{placeholder:e.$t("login.placeholder.password"),name:"password",type:"text"},domProps:{value:e.userData.password},on:{input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}}),a("label",[e._v(" "+e._s(e.errors.first("password"))+" ")])]),a("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.formSubmitted(t)}}},[e._v(" "+e._s(e.$t("button.login"))+" ")])])])},z=[],J={name:"Login",data:function(){return{userData:{email:"",password:""}}},computed:{emailError:function(){return this.$validator.errors.items.some((function(e){return"email"===e.field&&"required"===e.rule}))},phoneError:function(){return this.$validator.errors.items.some((function(e){return"phone"===e.field&&"required"===e.rule}))},passwordError:function(){return this.$validator.errors.items.some((function(e){return"password"===e.field&&"required"===e.rule}))}},methods:{formSubmitted:function(){var e=this;this.$validator.validateAll().then((function(t){t?e.$store.dispatch("login",e.userData):alert("Form not valid")}))}}},H=J,W=(a("7aaa"),Object(m["a"])(H,F,z,!1,null,"58af9034",null)),B=W.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat"},[a("div",{staticClass:"background"}),a("switch-trad",{attrs:{"is-footer":!1}}),a("side-bar"),a("list-label"),a(e.listType,{tag:"component",staticClass:"chat__lists"}),a("contact-info"),a("contact-messages"),a("user-onboarding")],1)},K=[],G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat__category"},["list-user-messages"===e.listType?a("h3",{staticClass:"chat__category__name"},[e._v(" "+e._s(e.listLabel)+" ")]):a("h3",{staticClass:"chat__category__name"},[e._v(" "+e._s(e.$t("chat.list.label"))+" ")])])},Q=[],Y={computed:Object(c["a"])({},Object(l["b"])(["listType","listLabel"]))},V=Y,Z=Object(m["a"])(V,G,Q,!1,null,null,null),X=Z.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-category"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"list-category__search-bar",attrs:{placeholder:e.$t("chat.list.placeholder"),type:"text"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._l(e.filterUsers,(function(t){return a("div",{key:t.id,staticClass:"list-category__user"},[a("img",{staticClass:"list-category__user__img",attrs:{src:t.profilePic,alt:"Main Profile Photo"}}),a("div",{staticClass:"list-category__user__info"},[a("h2",{staticClass:"list-category__user__info__name"},[e._v(" "+e._s(t.name)+" "+e._s(t.surname)+" ")]),a("p",{staticClass:"list-category__user__info__phone"},[e._v(" "+e._s(t.phone)+" ")])]),a("button",{staticClass:"list-category__user__btn list-category__user__btn__chat",on:{click:function(a){return e.chatWithContact(t)}}},[e._v(" Chat ")])])}))],2)},te=[],ae=(a("4de4"),a("ac1f"),a("466d"),a("841c"),a("498a"),{name:"FindUsers",data:function(){return{search:""}},computed:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["users","listType"])),{},{filterUsers:function(){var e=this;return this.users.filter((function(t){return t.phone.match(e.search.trim())}))}}),methods:{chatWithContact:function(e){return xt.$emit("chatWithContact"),this.$store.dispatch("chatWithContact",e)}}}),se=ae,re=(a("391f"),Object(m["a"])(se,ee,te,!1,null,"56b7eedc",null)),ne=re.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.userChatContact?a("div",{staticClass:"list-category"},e._l(e.userChatContactsSorted,(function(t){return a("div",{key:t.id,staticClass:"list-category__user",class:{activeChat:t.localId===e.userChatContact.localId},on:{click:function(a){return e.fetchMessages(t)}}},[a("img",{staticClass:"list-category__user__img",attrs:{src:t.profilePic,alt:"Main Profile Photo"}}),a("div",{staticClass:"list-category__user__info"},[a("h2",{staticClass:"list-category__user__info__name"},[e._v(" "+e._s(t.name)+" "+e._s(t.surname)+" ")]),a("p",{staticClass:"list-category__user__info__message"},[e._v(" "+e._s(e._f("sliceMessage")(t.messages))+" ")])]),a("h3",{staticClass:"list-category__user__time"},[e._v(" "+e._s(e._f("setTimeHourMinutes")(t.messages))+" ")])])})),0):e._e()},ie=[],ce={name:"Messages",data:function(){return{test:{},userContacts:[]}},computed:Object(c["a"])({},Object(l["b"])(["userChatContacts","userChatContactsSorted","userChatContact"])),methods:{fetchMessages:function(e){xt.$emit("chatWithContact"),this.$store.dispatch("chatWithContact",e)}}},le=ce,ue=(a("ccee"),Object(m["a"])(le,oe,ie,!1,null,"3adbc063",null)),de=ue.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat__side-bar"},[s("div",{staticClass:"chat__side-bar__container"},[e.user?s("a",{staticClass:"chat__side-bar__link"},[s("img",{staticClass:"chat__side-bar__profile-pic",attrs:{src:e.user.profilePic,alt:"Edit Button"}})]):e._e(),e.userChatContacts.length?s("a",{staticClass:"chat__side-bar__link",class:{"chat__side-bar__link--active":"list-user-messages"===e.listType},on:{click:e.switchToUserMessages}},[s("img",{staticClass:"chat__side-bar__icon",attrs:{src:a("5f66"),alt:"Edit Button"}})]):e._e(),s("a",{staticClass:"chat__side-bar__link",class:{"chat__side-bar__link--active":"list-users"===e.listType},on:{click:e.switchToUsers}},[s("img",{staticClass:"chat__side-bar__icon",attrs:{src:a("1a25"),alt:"Edit Button"}})])]),s("div",[s("a",{staticClass:"chat__side-bar__link",on:{click:e.logout}},[s("img",{staticClass:"chat__side-bar__icon chat__side-bar__icon--last",attrs:{src:a("309a"),alt:"Edit Button"}})])])])},pe=[],fe={name:"UserChatSideBar",computed:Object(c["a"])({},Object(l["b"])(["user","userChatContacts","listType"])),methods:{logout:function(){return this.redirectHome(),this.$store.commit("logout")},switchToUserMessages:function(){return this.$store.commit("switchToUserMessages")},switchToUsers:function(){return this.$store.commit("switchToUsers")},redirectHome:function(){this.$router.push("/login"),location.reload()}}},he=fe,_e=Object(m["a"])(he,me,pe,!1,null,"23cb10c0",null),ge=_e.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.userChatContact?a("div",{staticClass:"chat__contact"},[a("img",{attrs:{src:e.userChatContact.profilePic,alt:"Main Profile Photo"}}),a("div",{staticClass:"chat__contact__information"},[a("h1",[e._v(e._s(e.userChatContact.name)+" "+e._s(e.userChatContact.surname))]),e.userChatContactMessages.length>1?a("p",[e._v(" "+e._s(e.userChatContactMessages.length)+" messages ")]):a("p",[e._v(e._s(e.userChatContactMessages.length)+" message")])])]):e._e()},Ce=[],be={name:"UserChatCurrentContact",computed:Object(c["a"])({},Object(l["b"])(["userChatContact","userChatContactMessages"]))},ye=be,we=Object(m["a"])(ye,ve,Ce,!1,null,null,null),Ie=we.exports,$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat__messages"},[e.userChatContactMessages?s("div",{ref:"messages",staticClass:"chat__messages__conversation"},e._l(e.userChatContactMessages,(function(t){return s("p",{key:t.id,class:{sent:"sent"===t.type}},[e._v(" "+e._s(t.message)+" ")])})),0):e._e(),s("div",{staticClass:"chat__messages__write",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"typeMessage",attrs:{placeholder:e.$t("chat.typing"),type:"text"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),s("img",{attrs:{src:a("ad0d"),alt:"Send Icon"},on:{click:e.sendMessage}})])])},xe=[],Se={name:"UserChatContactMessages",data:function(){return{message:null}},watch:{userChatContactMessages:function(){this.scrollToEnd()}},created:function(){var e=this;xt.$on("chatWithContact",(function(){e.$refs.typeMessage&&e.selectTypeInput()}))},computed:Object(c["a"])({},Object(l["b"])(["userChatContact","userChatContactMessages"])),methods:{sendMessage:function(){this.message&&(this.$store.dispatch("storeMessage",this.message),this.clearTypeInput())},clearTypeInput:function(){this.message=""},selectTypeInput:function(){this.$refs.typeMessage.select()},scrollToEnd:function(){var e=this.$refs.messages;e.scrollTop=e.scrollHeight+e.clientHeight}}},ke=Se,Oe=Object(m["a"])(ke,$e,xe,!1,null,null,null),Me=Oe.exports,Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.userChatContact,expression:"!userChatContact"}],staticClass:"chat__onboarding"},[s("img",{staticClass:"chat__onboarding__photo",attrs:{src:a("dd45"),alt:"Hello"}}),s("div",{staticClass:"chat__onboarding__header"},[s("h1",{staticClass:"chat__onboarding__text__main"},[e._v(" "+e._s(e.$t("chat.onboarding.welcome"))+" ! "),s("h2",{staticClass:"chat__onboarding__text__second"},[e._v(" "+e._s(e.$t("chat.onboarding.subline"))+" ")])])])])},Ue=[],Te={name:"UserChatOnboarding",computed:Object(c["a"])({},Object(l["b"])(["userChatContact"]))},De=Te,je=(a("ea8d"),Object(m["a"])(De,Ee,Ue,!1,null,"688a7b2e",null)),Pe=je.exports,Ne={name:"UserChat",components:{"list-label":X,"list-users":ne,"list-user-messages":de,"side-bar":ge,"contact-info":Ie,"contact-messages":Me,"user-onboarding":Pe,"switch-trad":b},mounted:function(){this.refreshLocalStorage()},created:function(){this.$toasted.success("Logged In",{className:"toast-success",theme:"bubble",position:"top-right",duration:2e3})},computed:Object(c["a"])({},Object(l["b"])(["listType"])),methods:{refreshLocalStorage:function(){if(localStorage.getItem("storeUser")){var e=JSON.parse(localStorage.getItem("storeUser"));this.$store.commit("storeUser",e)}if(localStorage.getItem("storeUsers")){var t=JSON.parse(localStorage.getItem("storeUsers"));this.$store.commit("storeUsers",t)}if(localStorage.getItem("userChatContact")){var a=JSON.parse(localStorage.getItem("userChatContact"));this.$store.dispatch("chatWithContact",a)}if(localStorage.getItem("userChatContacts")){var s=JSON.parse(localStorage.getItem("userChatContacts"));this.$store.commit("storeUserChatContacts",s)}if(localStorage.getItem("userChatContactMessages")){var r=JSON.parse(localStorage.getItem("userChatContactMessages"));this.$store.commit("storeUserChatContactMessages",r)}}}},Le=Ne,qe=(a("c7e7"),Object(m["a"])(Le,R,K,!1,null,null,null)),Ae=qe.exports,Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("img",{attrs:{src:a("16f4"),alt:"404 error"}}),s("h2",[e._v(" "+e._s(e.$t("error.404"))+" ")])])},ze=[],Je={name:"Error"},He=Je,We=(a("e10a"),Object(m["a"])(He,Fe,ze,!1,null,"859a7508",null)),Be=We.exports;s["a"].use(x["a"]);var Re=[{path:"/",name:"Homepage",component:U},{path:"/signup",name:"Signup",component:A},{path:"/login",name:"Login",component:B},{path:"/chat",name:"Chat",component:Ae,beforeEnter:function(e,t,a){localStorage.getItem("tokenId")?a():a("/login")}},{path:"*",name:"404",component:Be}],Ke=new x["a"]({mode:"history",base:"/",routes:Re}),Ge=Ke,Qe=(a("5319"),a("bc3a")),Ye=a.n(Qe),Ve={userId:null,tokenId:null},Ze={isAuth:function(e){return null!==e.tokenId}},Xe={authUser:function(e,t){e.tokenId=t.tokenId,e.userId=t.userId},logout:function(e){e.tokenId=null,localStorage.clear()}},et={login:function(e,t){var a=e.commit,s=e.dispatch;Ye.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCGkv9-83v6LsQRhClROTowTL6rK5YcPI8",{email:t.email,password:t.password,returnSecureToken:!0}).then((function(e){console.log(e),a("storeLocalStorageUser",{tokenId:e.data.idToken,localId:e.data.localId,expiresIn:e.data.expiresIn}),a("authUser",{tokenId:e.data.idToken,userId:e.data.localId}),Ge.replace("/chat"),s("fetchUser")})).catch((function(e){console.log(e),alert("Invalid email")}))},signup:function(e,t){var a=e.commit,s=e.dispatch;Ye.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCGkv9-83v6LsQRhClROTowTL6rK5YcPI8",{email:t.email,password:t.password,returnSecureToken:!0}).then((function(e){delete t.email,delete t.password,a("storeLocalStorageUser",{tokenId:e.data.idToken,localId:e.data.localId,expiresIn:e.data.expiresIn,userData:t}),a("authUser",{tokenId:e.data.idToken,userId:e.data.localId}),t.localId=e.data.localId,s("storeUser",t),Ge.replace("/chat")})).catch((function(e){console.log(e)}))},autoLogin:function(e){var t=e.commit,a=localStorage.getItem("userId"),s=localStorage.getItem("tokenId"),r=localStorage.getItem("expiresIn"),n=localStorage.getItem("userData"),o=new Date;!s&&o>=r||(t("authUser",{tokenId:s,userId:a}),t("storeUser",n))}},tt={state:Ve,getters:Ze,mutations:Xe,actions:et},at=(a("7db0"),{user:null,userChatContact:null,userChatContacts:[],users:[]}),st={user:function(e){return e.user},userChatContact:function(e){return e.userChatContact},userChatContacts:function(e){return e.userChatContacts},userChatContactsSorted:function(e){return e.userChatContacts.sort((function(e,t){return t.lastTimestamp-e.lastTimestamp}))},users:function(e){return e.users},componentKey:function(e){return e.componentKey}},rt={storeUser:function(e,t){e.user=t},storeUserChatContact:function(e,t){e.userChatContact=t},storeUserChatContacts:function(e,t){e.userChatContacts=t},addUserContact:function(e,t){e.user.contacts.push(t),e.users=e.users.filter((function(e){return e.localId!==t.localId}))},storeUsers:function(e,t){e.users=t},storeLocalStorageUser:function(e,t){var a=new Date,s=new Date(a.getTime()+1e3*t.expiresIn);localStorage.setItem("tokenId",t.tokenId),localStorage.setItem("userId",t.localId),localStorage.setItem("userData",t.userData),localStorage.setItem("expiresIn",s)}},nt={storeUser:function(e,t){var a=e.commit,s=e.dispatch;Ye.a.post("https://message-app-719f5.firebaseio.com/users.json",t).then((function(e){console.log(e),a("storeUser",t),s("fetchUser")})).catch((function(e){return console.log(e)}))},fetchUser:function(e){var t=e.commit,a=e.dispatch,s=e.rootState;Ye.a.get("https://message-app-719f5.firebaseio.com/users.json").then((function(e){console.log(e);var r=e.data,n=[];for(var o in r){var i=r[o];i.key=o,n.push(i)}var c=n.find((function(e){return e.localId===s.auth.userId})),l=n.filter((function(e){return e.localId!==s.auth.userId}));localStorage.setItem("storeUser",JSON.stringify(c)),localStorage.setItem("storeUsers",JSON.stringify(l)),t("storeUser",c),t("storeUsers",l),a("fetchMessages")})).catch((function(e){return console.log(e)}))},chatWithContact:function(e,t){var a=e.commit;localStorage.setItem("userChatContact",JSON.stringify(t)),a("storeUserChatContact",t),a("emptyMessages"),t.messages&&a("storeUserChatContactMessages",t.messages),a("switchToUserMessages")}},ot={state:at,getters:st,mutations:rt,actions:nt},it={type:"list-users"},ct={listType:function(e){return e.type},listLabel:function(e){return"list-user-messages"===e.type?"Messages":"list-users"===e.type?"Find New Contact":void 0}},lt={switchToUsers:function(e){e.type="list-users"},switchToUserMessages:function(e){e.type="list-user-messages"}},ut={},dt={state:it,getters:ct,mutations:lt,actions:ut},mt=(a("99af"),a("4160"),a("d81d"),a("159b"),{userChatContactMessages:[]}),pt={userChatContactMessages:function(e){return e.userChatContactMessages}},ft={storeUserChatContactMessages:function(e,t){e.userChatContactMessages=t},emptyMessages:function(e){e.userChatContactMessages=[]},storeMessage:function(e,t){e.userChatContactMessages.push(t)}},ht={storeMessage:function(e,t){var a=e.state,s=e.rootState,r=e.commit,n=e.dispatch,o=(new Date).getTime(),i={senderId:s.users.user.localId,receiverId:s.users.userChatContact.localId,message:t,timestamp:o},c=i;c.type="sent",r("storeMessage",c),localStorage.setItem("userChatContactMessages",JSON.stringify(a.userChatContactMessages)),P.a.database().ref("messages").push(i).then((function(e){console.log(e),n("fetchMessages"),r("switchToUserMessages")})).catch((function(e){return console.log(e)}))},fetchMessages:function(e){var t=e.rootState,s=e.commit,r=e.dispatch;P.a.database().ref("messages").on("value",(function(e){var n=[],o=e.val();for(var i in o){var c=o[i];n.push(c)}var l=t.users.user.localId,u=a("2ef0"),d=n.filter((function(e){return e.receiverId===l||e.senderId===l})).map((function(e){var t=e.senderId===l?e.receiverId:e.senderId;return t}));if(d.length){var m=u.uniq(d,"localId").filter((function(e){return e!==l})),p=[];m.forEach((function(e){var a=t.users.users.find((function(t){return t.localId===e}));p.push(a)})),p.forEach((function(e){var t=n.filter((function(t){return t.receiverId===e.localId&&t.senderId===l||t.receiverId===l&&t.senderId===e.localId})),a=t.filter((function(e){return e.senderId===l}));a.forEach((function(e){return e.type="sent"}));var s=t.filter((function(e){return e.receiverId===l}));s.forEach((function(e){return e.type="received"}));var r=a.concat(s);e.messages=r.sort((function(e,t){return t.timestamp-e.timestamp}));var o=r.sort((function(e,t){return e.timestamp-t.timestamp}));e.lastTimestamp=o[o.length-1].timestamp})),s("storeUserChatContacts",p),localStorage.setItem("userChatContacts",JSON.stringify(p));var f=n.filter((function(e){return e.receiverId===l||e.senderId===l})),h=f[f.length-1],_=h.senderId===l?h.receiverId:h.senderId,g=p.find((function(e){return e.localId===_}));r("chatWithContact",g)}}))}},_t={state:mt,getters:pt,mutations:ft,actions:ht};s["a"].use(l["a"]);var gt=new l["a"].Store({modules:{auth:tt,users:ot,lists:dt,messages:_t}}),vt=gt,Ct=a("7bb1"),bt=(a("d3b7"),a("ddb0"),a("a925"));function yt(){var e=a("49f8"),t={};return e.keys().forEach((function(a){var s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){var r=s[1];t[r]=e(a)}})),t}s["a"].use(bt["a"]);var wt=new bt["a"]({locale:"en",fallbackLocale:"en",messages:yt()}),It=a("a65d"),$t=a.n(It);a("fb6a");s["a"].filter("setTimeHourMinutes",(function(e){var t=e.length-1,a=e[t].timestamp,s=new Date(a),r=s.getHours(),n="0".concat(s.getMinutes()),o="".concat(r,":").concat(n.substr(-2));return o})),s["a"].filter("sliceMessage",(function(e){var t=e.length-1;return e[t].message.slice(0,14)+".."})),s["a"].config.productionTip=!1,s["a"].use(Ct["a"]),s["a"].use($t.a);var xt=new s["a"],St={apiKey:"AIzaSyCGkv9-83v6LsQRhClROTowTL6rK5YcPI8",authDomain:"message-app-719f5.firebaseapp.com",databaseURL:"https://message-app-719f5.firebaseio.com",projectId:"message-app-719f5",storageBucket:"message-app-719f5.appspot.com",messagingSenderId:"114576309871",appId:"1:114576309871:web:bc8e8f4dfdee99f352d79a"};P.a.initializeApp(St),new s["a"]({router:Ge,store:vt,i18n:wt,render:function(e){return e($)}}).$mount("#app")},"5f66":function(e,t,a){e.exports=a.p+"img/chat.8fc2dcfe.svg"},"64f1":function(e,t,a){"use strict";var s=a("e032"),r=a.n(s);r.a},"6b70":function(e,t,a){},"6bf7":function(e,t,a){e.exports=a.p+"img/flag-us.38f88714.svg"},"7aaa":function(e,t,a){"use strict";var s=a("d950"),r=a.n(s);r.a},"7ef8":function(e,t,a){"use strict";var s=a("8efe"),r=a.n(s);r.a},"7faf":function(e,t,a){"use strict";var s=a("b8ff"),r=a.n(s);r.a},"8efe":function(e,t,a){},"9baf":function(e,t,a){e.exports=a.p+"img/flag-fr.684cc20f.svg"},ad0d:function(e,t,a){e.exports=a.p+"img/send.317b15cf.svg"},b8ff:function(e,t,a){},bb28:function(e,t,a){},c5eb:function(e,t,a){},c77a:function(e,t,a){},c7e7:function(e,t,a){"use strict";var s=a("bb28"),r=a.n(s);r.a},ccee:function(e,t,a){"use strict";var s=a("c5eb"),r=a.n(s);r.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.7ddcdbf3.png"},d737:function(e,t,a){e.exports=a.p+"img/cloud-girl.56aa2ad8.png"},d950:function(e,t,a){},dac7:function(e,t,a){e.exports=a.p+"img/default-user.4140fefe.png"},dd45:function(e,t,a){e.exports=a.p+"img/hello.92b2d250.png"},dfde:function(e,t,a){"use strict";var s=a("6b70"),r=a.n(s);r.a},e032:function(e,t,a){},e10a:function(e,t,a){"use strict";var s=a("487b"),r=a.n(s);r.a},e46a:function(e,t,a){},ea8d:function(e,t,a){"use strict";var s=a("c77a"),r=a.n(s);r.a},edd4:function(e){e.exports=JSON.parse('{"homepage":{"header":"Connect with friends <br> in real time","communication":"Fast. Simple. Free.","description":"Bolt is a fresh platform to communicate with your friends with instant messages. Once you are signed in, find a friend thanks to its phone number and start chatting !"},"button":{"onboarding":"Get Started","logout":"Logout","login":"Login","signup":"Signup"},"signup":{"title":"Please fill this form","placeholder":{"name":"Enter your name..","surname":"Enter your surname..","phone":"Enter your phone..","email":"Enter your email..","password":"Enter your password.."}},"login":{"title":"Signup","placeholder":{"email":"Enter your email..","password":"Enter your password.."}},"chat":{"list":{"label":"Find New Contacts","placeholder":"Enter your phone.."},"typing":"Type your message here..","onboarding":{"welcome":"Welcome","subline":"Find contacts and start chatting !"}},"error":{"404":"The page you are looking for does not exist !"}}')},f3ce:function(e,t,a){},f693:function(e){e.exports=JSON.parse('{"homepage":{"header":"Connecte avec tes amis <br> en temps réel","communication":"Simple. Rapide. Gratuit.","description":"Bolt est une plateforme pour communiquer avec tes amis avec des messages instantanés. Une fois connecté(e), trouve tes amis grâce à leur numéro mobile et commence à chatter !"},"button":{"onboarding":"Essaie maintenant","logout":"Déconnexion","login":"Connexion","signup":"S\'inscire"},"signup":{"title":"Veuillez remplir ce formulaire","placeholder":{"name":"Entrez votre prénom..","surname":"Entrez votre nom..","phone":"Entrez votre numéro mobile..","email":"Entrez votre email..","password":"Entrez votre mot de passe.."}},"login":{"title":"Inscription","placeholder":{"email":"Entrez votre email..","password":"Entrez votre mot de passe.."}},"chat":{"list":{"label":"Trouve de Nouveaux Contacts","placeholder":"Entrez votre numéro mobile.."},"typing":"Ecrivez un message..","onboarding":{"welcome":"Bienvenu","subline":"Trouve des contacts et commence à chatter !"}},"error":{"404":"La page que vous recherchez n\'existe pas !"}}')}});
//# sourceMappingURL=app.3426c295.js.map