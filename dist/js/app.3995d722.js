(function(t){function e(e){for(var s,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0980":function(t,e,a){"use strict";var s=a("5e5f"),n=a.n(s);n.a},"0b2b":function(t,e,a){},"0cea":function(t,e,a){},"16f4":function(t,e,a){t.exports=a.p+"img/404.8b1bcd55.png"},"1a25":function(t,e,a){t.exports=a.p+"img/contact-book.a41643da.svg"},"309a":function(t,e,a){t.exports=a.p+"img/logout.16b3b3aa.svg"},"332e":function(t,e,a){"use strict";var s=a("7770"),n=a.n(s);n.a},"382c":function(t,e,a){"use strict";var s=a("f629"),n=a.n(s);n.a},"49f8":function(t,e,a){var s={"./en.json":"edd4","./fr.json":"f693"};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="49f8"},"4aeb":function(t,e,a){t.exports=a.p+"img/eye-text.37228d13.svg"},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return Ke}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a(t.layout,{tag:"component"},[a("transition",{attrs:{name:"slide-fade"}},[a("router-view")],1)],1)],1)},r=[],o=a("5530"),i=a("2f62"),c={name:"App",data:function(){return{defaultLayout:"default"}},created:function(){this.autoLogin()},computed:{layout:function(){return(this.$route.meta.layout||this.defaultLayout)+"-layout"}},methods:Object(o["a"])({},Object(i["b"])(["autoLogin"]))},l=c,u=(a("7faf"),a("2877")),d=Object(u["a"])(l,n,r,!1,null,null,null),p=d.exports,m=a("8c4f"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("main",{staticClass:"hero"},[s("div",{staticClass:"hero__text"},[s("h3",[t._v(t._s(t.$t("homepage.communication")))]),s("h1",{domProps:{innerHTML:t._s(t.$t("homepage.header"))}}),s("p",[t._v(" "+t._s(t.$t("homepage.description"))+" ")]),s("router-link",{attrs:{to:"/signup"}},[s("button",{staticClass:"btn"},[t._v(t._s(t.$t("button.onboarding")))])])],1),s("img",{staticClass:"hero__img",attrs:{src:a("d737"),alt:"cloud girl"}})])])},_=[],h={name:"Homepage"},g=h,v=(a("332e"),Object(u["a"])(g,f,_,!1,null,"36fbc516",null)),b=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("form",{staticClass:"container__form"},[a("div",{staticClass:"container__form__label"},[a("h2",[t._v(t._s(t.$t("signup.title")))])]),a("div",{staticClass:"container__form__photo"},[a("div",{staticClass:"container__form__photo__circle"},[a("img",{attrs:{src:t.profilePicDOM,alt:""}}),t.userData.profilePic?t._e():a("p",{staticClass:"container__form__photo__circle__label"},[t._v(" + Add photo "),a("br"),t._v(" here ")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"myFiles",staticClass:"container__form__photo__upload",attrs:{id:"file",name:"image",type:"file"},on:{change:t.onFileSelected}}),a("label",{staticClass:"container__form__photo__circle__error"},[t._v(" "+t._s(t.errors.first("image"))+" ")])])]),a("div",{staticClass:"container__form__input"},[a("div",{staticClass:"container__form__field container__form__input__appelation"},[a("div",{staticClass:"container__form__input__appelation__error"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.userData.name,expression:"userData.name"}],class:{error:t.errors.has("name")},attrs:{placeholder:t.$t("signup.placeholder.name"),name:"name",type:"text"},domProps:{value:t.userData.name},on:{input:function(e){e.target.composing||t.$set(t.userData,"name",e.target.value)}}}),a("label",{staticClass:"container__form__input__appelation__error__label"},[t._v(" "+t._s(t.errors.first("name"))+" ")])]),a("div",[a("div",{staticClass:"container__form__input__appelation__error"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.userData.surname,expression:"userData.surname"}],class:{error:t.errors.has("surname")},attrs:{placeholder:t.$t("signup.placeholder.surname"),name:"surname",type:"text"},domProps:{value:t.userData.surname},on:{input:function(e){e.target.composing||t.$set(t.userData,"surname",e.target.value)}}}),a("label",{staticClass:"container__form__input__appelation__error__label"},[t._v(" "+t._s(t.errors.first("surname"))+" ")])])])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^(?:(?:\+|00)[1-9][1-9][\s.-]{0,3}(?:\(0\)[\s.-]{0,3})?|0)[1-9](?:(?:[\s.-]?\d{2}){4}|\d{2}(?:[\s.-]?\d{3}){2})$/},expression:"{ required: true, regex: /^(?:(?:\\+|00)[1-9][1-9][\\s.-]{0,3}(?:\\(0\\)[\\s.-]{0,3})?|0)[1-9](?:(?:[\\s.-]?\\d{2}){4}|\\d{2}(?:[\\s.-]?\\d{3}){2})$/ }"},{name:"model",rawName:"v-model",value:t.userData.phone,expression:"userData.phone"}],class:{error:t.errors.has("phone")},attrs:{placeholder:t.$t("signup.placeholder.phone"),name:"phone",type:"text"},domProps:{value:t.userData.phone},on:{input:function(e){e.target.composing||t.$set(t.userData,"phone",e.target.value)}}}),a("label",[t._v(t._s(t.errors.first("phone")))])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.userData.email,expression:"userData.email"}],class:{error:t.errors.has("email")},attrs:{placeholder:t.$t("signup.placeholder.email"),name:"email",type:"text"},domProps:{value:t.userData.email},on:{input:function(e){e.target.composing||t.$set(t.userData,"email",e.target.value)}}}),a("label",[t._v(t._s(t.errors.first("email")))])]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"},{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],class:{error:t.errors.has("password")},attrs:{placeholder:t.$t("signup.placeholder.password"),name:"password",type:"text"},domProps:{value:t.userData.password},on:{input:function(e){e.target.composing||t.$set(t.userData,"password",e.target.value)}}}),a("label",[t._v(" "+t._s(t.errors.first("password"))+" ")])])]),a("div",{staticClass:"container__form__btn"},[a("button",{staticClass:"btn",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.formSubmitted(e)}}},[t._v(" "+t._s(t.$t("button.signup"))+" ")])])])])},w=[],C=(a("b0c0"),a("8aa5")),I=a.n(C),O=a("ecee"),x=a("c074");O["b"].add(x["b"]),O["b"].add(x["a"]),O["a"].watch();var k={methods:{toastedSuccess:function(){this.$toasted.success("Logged In",{className:"toast-success",icon:"check-circle",theme:"bubble",position:"top-right",duration:2e3})},toastedError:function(){this.$toasted.error("Form not valid",{icon:"exclamation-circle",className:"toast-error",theme:"bubble",position:"top-center",duration:2e3})}}},S={name:"Signup",mixins:[k],data:function(){return{userData:{name:"",surname:"",email:"",phone:"",profilePic:null}}},computed:{profilePicDOM:function(){return this.userData.profilePic?this.userData.profilePic:a("dac7")}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["signup"])),{},{formSubmitted:function(){var t=this;this.$validator.validateAll().then((function(e){if(e)return t.signup(t.userData);t.toastedError()}))},onFileSelected:function(t){var e=this,a=t.target.files[0],s=I.a.storage().ref("profile-pics/"+a.name),n=s.put(a);n.on("state_changed",(function(t){console.log(t)}),(function(t){console.log(t)}),(function(){n.snapshot.ref.getDownloadURL().then((function(t){e.userData.profilePic=t}))}))}})},j=S,T=(a("b446"),Object(u["a"])(j,y,w,!1,null,"44431ab7",null)),D=T.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("form",{staticClass:"container__form"},[a("h2",[t._v("Please login")]),a("div",{staticClass:"container__form__field"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.userData.email,expression:"userData.email"}],class:{error:t.errors.has("email")},attrs:{placeholder:t.$t("login.placeholder.email"),name:"email",type:"text"},domProps:{value:t.userData.email},on:{input:function(e){e.target.composing||t.$set(t.userData,"email",e.target.value)}}}),a("label",[t._v(t._s(t.errors.first("email")))])]),a("div",{staticClass:"container__form__field"},["checkbox"===t.inputType?a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"},{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],class:{error:t.errors.has("password")},attrs:{placeholder:t.$t("login.placeholder.password"),name:"password",type:"checkbox"},domProps:{checked:Array.isArray(t.userData.password)?t._i(t.userData.password,null)>-1:t.userData.password},on:{change:function(e){var a=t.userData.password,s=e.target,n=!!s.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);s.checked?o<0&&t.$set(t.userData,"password",a.concat([r])):o>-1&&t.$set(t.userData,"password",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.userData,"password",n)}}}):"radio"===t.inputType?a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"},{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],class:{error:t.errors.has("password")},attrs:{placeholder:t.$t("login.placeholder.password"),name:"password",type:"radio"},domProps:{checked:t._q(t.userData.password,null)},on:{change:function(e){return t.$set(t.userData,"password",null)}}}):a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"},{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],class:{error:t.errors.has("password")},attrs:{placeholder:t.$t("login.placeholder.password"),name:"password",type:t.inputType},domProps:{value:t.userData.password},on:{input:function(e){e.target.composing||t.$set(t.userData,"password",e.target.value)}}}),a("img",{staticClass:"container__form__field__icon",attrs:{src:t.iconPasswordVisibility,alt:"Eye icon"},on:{click:t.togglePasswordVisibility}}),a("label",[t._v(t._s(t.errors.first("password")))])]),a("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.formSubmitted(e)}}},[t._v(" "+t._s(t.$t("button.login"))+" ")])])])},M=[],E={name:"Login",mixins:[k],data:function(){return{inputType:"password",iconPasswordVisibility:a("5d81"),userData:{email:"",password:""}}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["login"])),{},{formSubmitted:function(){var t=this;this.$validator.validateAll().then((function(e){if(e)return t.login(t.userData);t.toastedError()}))},togglePasswordVisibility:function(){this.inputType="password"===this.inputType?"text":"password",this.iconPasswordVisibility=a("cafe")("./eye-".concat(this.inputType,".svg"))}})},U=E,P=(a("b011"),Object(u["a"])(U,$,M,!1,null,"7b286bf0",null)),N=P.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat"},[a("side-bar"),a("list-label"),a(t.listType,{tag:"component",staticClass:"chat__lists"}),a("router-view"),a("user-onboarding")],1)},A=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat__category"},["list-user-messages"===t.listType?a("h3",{staticClass:"chat__category__name"},[t._v(" "+t._s(t.listLabel)+" ")]):a("h3",{staticClass:"chat__category__name"},[t._v(" "+t._s(t.$t("chat.list.label"))+" ")])])},F=[],z={computed:Object(o["a"])({},Object(i["c"])(["listType","listLabel"]))},J=z,R=Object(u["a"])(J,q,F,!1,null,null,null),B=R.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-category"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"list-category__search-bar",attrs:{placeholder:t.$t("chat.list.placeholder"),type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._l(t.filterUsers,(function(e){return a("div",{key:e.id,staticClass:"list-category__user"},[a("img",{staticClass:"list-category__user__img",attrs:{src:e.profilePic,alt:"Main Profile Photo"}}),a("div",{staticClass:"list-category__user__info"},[a("h2",{staticClass:"list-category__user__info__name"},[t._v(" "+t._s(e.name)+" "+t._s(e.surname)+" ")]),a("p",{staticClass:"list-category__user__info__phone"},[t._v(" "+t._s(e.phone)+" ")])]),a("button",{staticClass:"list-category__user__btn list-category__user__btn__chat"},[a("router-link",{attrs:{to:"/chat/"+e.name},nativeOn:{click:function(a){return t.redirectToChatContact(e)}}},[t._v(" Chat ")])],1)])}))],2)},W=[],V=(a("4de4"),a("ac1f"),a("466d"),a("841c"),a("498a"),{name:"FindUsers",data:function(){return{search:""}},computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])(["users","listType"])),{},{filterUsers:function(){var t=this;return this.users.filter((function(e){return e.phone.match(t.search.trim())}))}}),methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["chatWithContact","fetchMessages"])),{},{redirectToChatContact:function(t){Ke.$emit("chat-with-contact"),this.chatWithContact(t)}})}),G=V,K=(a("cb44"),Object(u["a"])(G,H,W,!1,null,"7d07738e",null)),Q=K.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.contact?a("div",{staticClass:"list-category"},t._l(t.contactsSorted,(function(e){return a("router-link",{key:e.id,staticClass:"list-category__user",class:{activeChat:e.localId===t.contact.localId},attrs:{to:"/chat/"+e.name},nativeOn:{click:function(a){return t.fetchMessages(e)}}},[a("img",{staticClass:"list-category__user__img",attrs:{src:e.profilePic,alt:"Main Profile Photo"}}),a("div",{staticClass:"list-category__user__info"},[a("h2",{staticClass:"list-category__user__info__name"},[t._v(" "+t._s(e.name)+" "+t._s(e.surname)+" ")]),a("p",{staticClass:"list-category__user__info__message"},[t._v(" "+t._s(t._f("sliceMessage")(e.messages))+" ")])]),a("h3",{staticClass:"list-category__user__time"},[t._v(" "+t._s(t._f("setTimeHourMinutes")(e.messages))+" ")])])})),1):t._e()},Z=[],X={name:"Messages",data:function(){return{test:{},userContacts:[]}},computed:Object(o["a"])({},Object(i["c"])(["contacts","contactsSorted","contact"])),methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["chatWithContact"])),{},{fetchMessages:function(t){Ke.$emit("chat-with-contact"),this.chatWithContact(t)}})},tt=X,et=(a("cfab"),Object(u["a"])(tt,Y,Z,!1,null,"21c089c1",null)),at=et.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat__side-bar"},[s("div",{staticClass:"chat__side-bar__container"},[t.user?s("a",{staticClass:"chat__side-bar__link"},[s("img",{staticClass:"chat__side-bar__profile-pic",attrs:{src:t.user.profilePic,alt:"Edit Button"}})]):t._e(),t.contacts.length?s("a",{staticClass:"chat__side-bar__link",class:{"chat__side-bar__link--active":"list-user-messages"===t.listType},on:{click:t.switchToUserMessages}},[s("img",{staticClass:"chat__side-bar__icon",attrs:{src:a("5f66"),alt:"Edit Button"}})]):t._e(),s("a",{staticClass:"chat__side-bar__link",class:{"chat__side-bar__link--active":"list-users"===t.listType},on:{click:t.switchToUsers}},[s("img",{staticClass:"chat__side-bar__icon",attrs:{src:a("1a25"),alt:"Edit Button"}})])]),s("div",[s("router-link",{staticClass:"link",attrs:{to:"/"}},[s("div",[s("a",{staticClass:"chat__side-bar__link"},[s("img",{staticClass:"chat__side-bar__icon chat__side-bar__icon",attrs:{src:a("cf05"),alt:"Menu Button"}})])])]),s("div",[s("a",{staticClass:"chat__side-bar__link",on:{click:t.logoutAndRedirect}},[s("img",{staticClass:"chat__side-bar__icon chat__side-bar__icon--last",attrs:{src:a("309a"),alt:"Edit Button"}})])])],1)])},nt=[],rt={name:"UserChatSideBar",computed:Object(o["a"])({},Object(i["c"])(["user","contacts","listType"])),methods:Object(o["a"])(Object(o["a"])({},Object(i["d"])({logout:"logout",switchToUserMessages:"switchToUserMessages",switchToUsers:"switchToUsers"})),{},{logoutAndRedirect:function(){this.redirectHome(),this.logout()},redirectHome:function(){this.$router.push("/login"),location.reload()}})},ot=rt,it=Object(u["a"])(ot,st,nt,!1,null,"b81a9d52",null),ct=it.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat__container"},[t.contact?s("div",{staticClass:"chat__contact"},[s("img",{attrs:{src:t.contact.profilePic,alt:"Main Profile Photo"}}),s("div",{staticClass:"chat__contact__information"},[s("h1",[t._v(t._s(t.contact.name)+" "+t._s(t.contact.surname))]),t.contactMessages.length>1?s("p",[t._v(" "+t._s(t.contactMessages.length)+" messages ")]):s("p",[t._v(t._s(t.contactMessages.length)+" message")])])]):t._e(),s("div",{staticClass:"chat__messages"},[t.contactMessages?s("div",{ref:"messages",staticClass:"chat__messages__conversation"},t._l(t.contactMessages,(function(e){return s("p",{key:e.id,class:{sent:"sent"===e.type}},[t._v(" "+t._s(e.message)+" ")])})),0):t._e(),s("div",{staticClass:"chat__messages__write",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"typeMessage",attrs:{placeholder:t.$t("chat.typing"),type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),s("img",{attrs:{src:a("ad0d"),alt:"Send Icon"},on:{click:t.sendMessage}})])])])},ut=[],dt={name:"ContactMessages",data:function(){return{message:null}},watch:{contactMessages:function(){this.scrollToEnd()}},created:function(){var t=this;Ke.$on("chat-with-contact",(function(){t.$refs.typeMessage&&t.selectTypeInput()}))},computed:Object(o["a"])({},Object(i["c"])(["contact","contactMessages"])),methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["storeMessage"])),{},{sendMessage:function(){this.message&&(this.storeMessage(this.message),this.clearTypeInput())},clearTypeInput:function(){this.message=""},selectTypeInput:function(){this.$refs.typeMessage.select()},scrollToEnd:function(){var t=this.$refs.messages;t.scrollTop=t.scrollHeight+t.clientHeight}})},pt=dt,mt=(a("ce96"),Object(u["a"])(pt,lt,ut,!1,null,"aa5e0b96",null)),ft=mt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.contact?t._e():s("div",{staticClass:"chat__onboarding"},[s("img",{staticClass:"chat__onboarding__photo",attrs:{src:a("dd45"),alt:"Hello"}}),s("div",{staticClass:"chat__onboarding__header"},[s("h1",{staticClass:"chat__onboarding__text__main"},[t._v(" "+t._s(t.$t("chat.onboarding.welcome"))+" ! "),s("h2",{staticClass:"chat__onboarding__text__second"},[t._v(" "+t._s(t.$t("chat.onboarding.subline"))+" ")])])])])},ht=[],gt={name:"UserChatOnboarding",computed:Object(o["a"])({},Object(i["c"])(["contact"]))},vt=gt,bt=(a("382c"),Object(u["a"])(vt,_t,ht,!1,null,"46567112",null)),yt=bt.exports,wt={name:"UserChat",mixins:[k],components:{"list-label":B,"list-users":Q,"list-user-messages":at,"side-bar":ct,"contact-messages":ft,"user-onboarding":yt},mounted:function(){this.toastedSuccess(),this.refreshLocalStorage()},computed:Object(o["a"])({},Object(i["c"])(["listType"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])({storeUser:"storeUser",storeUsers:"storeUsers",storeContacts:"storeContacts",storeContactMessages:"storeContactMessages"})),Object(i["b"])(["chatWithContact"])),{},{refreshLocalStorage:function(){if(localStorage.getItem("storeUser")){var t=JSON.parse(localStorage.getItem("storeUser"));this.storeUser(t)}if(localStorage.getItem("storeUsers")){var e=JSON.parse(localStorage.getItem("storeUsers"));this.storeUsers(e)}if(localStorage.getItem("contact")){var a=JSON.parse(localStorage.getItem("contact"));this.chatWithContact(a)}if(localStorage.getItem("contacts")){var s=JSON.parse(localStorage.getItem("contacts"));this.storeContacts(s)}if(localStorage.getItem("contactMessages")){var n=JSON.parse(localStorage.getItem("contactMessages"));this.storeContactMessages(n)}}})},Ct=wt,It=(a("e901"),Object(u["a"])(Ct,L,A,!1,null,null,null)),Ot=It.exports,xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("img",{attrs:{src:a("16f4"),alt:"404 error"}}),s("h1",[t._v(" "+t._s(t.$t("error.404"))+" ")])])},kt=[],St={name:"Error"},jt=St,Tt=(a("9f22"),Object(u["a"])(jt,xt,kt,!1,null,"2a4240be",null)),Dt=Tt.exports;s["a"].use(m["a"]);var $t=[{path:"/",name:"homepage",component:b},{path:"/signup",name:"signup",component:D},{path:"/login",name:"login",component:N},{path:"/chat",name:"chat",meta:{layout:"chat"},component:Ot,children:[{path:"/chat/:contact",name:"chat-contact",meta:{layout:"chat"},component:ft}],beforeEnter:function(t,e,a){localStorage.getItem("tokenId")?a():a("/login")}},{path:"*",name:"404",component:Dt}],Mt=new m["a"]({mode:"history",base:"/",routes:$t}),Et=Mt,Ut=a("bc3a"),Pt=a.n(Ut),Nt={userId:null,tokenId:null,initLogin:!1},Lt={isAuth:function(t){return null!==t.tokenId}},At={authUser:function(t,e){t.tokenId=e.tokenId,t.userId=e.userId},logout:function(t){t.tokenId=null,localStorage.clear()},setInitLogin:function(t){t.initLogin=!0}},qt={login:function(t,e){var a=t.commit,s=t.dispatch;Pt.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCGkv9-83v6LsQRhClROTowTL6rK5YcPI8",{email:e.email,password:e.password,returnSecureToken:!0}).then((function(t){console.log(t),a("storeUserLocalStorage",{tokenId:t.data.idToken,localId:t.data.localId,expiresIn:t.data.expiresIn}),a("authUser",{tokenId:t.data.idToken,userId:t.data.localId}),a("setInitLogin"),s("fetchUsers"),s("fetchMessages")})).catch((function(t){console.log(t),alert("Invalid email")}))},signup:function(t,e){var a=t.commit,s=t.dispatch;Pt.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCGkv9-83v6LsQRhClROTowTL6rK5YcPI8",{email:e.email,password:e.password,returnSecureToken:!0}).then((function(t){delete e.email,delete e.password,a("storeUserLocalStorage",{tokenId:t.data.idToken,localId:t.data.localId,expiresIn:t.data.expiresIn,userData:e}),a("authUser",{tokenId:t.data.idToken,userId:t.data.localId}),e.localId=t.data.localId,s("storeUser",e),Et.push("/chat")})).catch((function(t){console.log(t)}))},autoLogin:function(t){var e=t.commit,a=localStorage.getItem("userId"),s=localStorage.getItem("tokenId"),n=localStorage.getItem("expiresIn"),r=localStorage.getItem("userData"),o=new Date;!s&&o>=n||(e("authUser",{tokenId:s,userId:a}),e("storeUser",r))}},Ft={state:Nt,getters:Lt,mutations:At,actions:qt},zt={user:null},Jt={user:function(t){return t.user}},Rt={storeUser:function(t,e){t.user=e},storeUserLocalStorage:function(t,e){var a=new Date,s=new Date(a.getTime()+1e3*e.expiresIn);localStorage.setItem("tokenId",e.tokenId),localStorage.setItem("userId",e.localId),localStorage.setItem("expiresIn",s),e.userData&&localStorage.setItem("userData",e.userData)}},Bt={storeUser:function(t,e){var a=t.commit,s=t.dispatch;Pt.a.post("https://message-app-719f5.firebaseio.com/users.json",e).then((function(t){console.log(t),a("storeUser",e),s("fetchUsers")})).catch((function(t){return console.log(t)}))}},Ht={state:zt,getters:Jt,mutations:Rt,actions:Bt},Wt=(a("7db0"),{users:[]}),Vt={users:function(t){return t.users}},Gt={storeUsers:function(t,e){t.users=e}},Kt={fetchUsers:function(t){var e=t.commit,a=t.rootState;Pt.a.get("https://message-app-719f5.firebaseio.com/users.json").then((function(t){console.log(t);var s=t.data,n=[];for(var r in s){var o=s[r];o.key=r,n.push(o)}var i=n.find((function(t){return t.localId===a.auth.userId})),c=n.filter((function(t){return t.localId!==a.auth.userId}));localStorage.setItem("storeUser",JSON.stringify(i)),localStorage.setItem("storeUsers",JSON.stringify(c)),e("storeUser",i),e("storeUsers",c)})).catch((function(t){return console.log(t)}))}},Qt={state:Wt,getters:Vt,mutations:Gt,actions:Kt},Yt={contact:null},Zt={contact:function(t){return t.contact}},Xt={storeContact:function(t,e){t.contact=e}},te={chatWithContact:function(t,e){var a=t.commit,s=t.rootState;localStorage.setItem("contact",JSON.stringify(e)),a("storeContact",e),a("emptyMessages"),e.messages&&a("storeContactMessages",e.messages);var n=s.contacts.contacts.find((function(t){return t.localId===e.localId}));n&&a("storeContactMessages",n.messages),a("switchToUserMessages")}},ee={state:Yt,getters:Zt,mutations:Xt,actions:te},ae={contacts:[]},se={contacts:function(t){return t.contacts},contactsSorted:function(t){return t.contacts.sort((function(t,e){return e.lastTimestamp-t.lastTimestamp}))}},ne={storeContacts:function(t,e){t.contacts=e}},re={},oe={state:ae,getters:se,mutations:ne,actions:re},ie={type:"list-users"},ce={listType:function(t){return t.type},listLabel:function(t){return"list-user-messages"===t.type?"Messages":"list-users"===t.type?"Find New Contact":void 0}},le={switchToUsers:function(t){t.type="list-users"},switchToUserMessages:function(t){t.type="list-user-messages"}},ue={},de={state:ie,getters:ce,mutations:le,actions:ue},pe=(a("99af"),a("4160"),a("d81d"),a("159b"),{contactMessages:[]}),me={contactMessages:function(t){return t.contactMessages}},fe={storeContactMessages:function(t,e){t.contactMessages=e},storeMessage:function(t,e){t.contactMessages.push(e)},emptyMessages:function(t){t.contactMessages=[]}},_e={storeMessage:function(t,e){var a=t.state,s=t.rootState,n=t.commit,r=t.dispatch,o=(new Date).getTime(),i={senderId:s.user.user.localId,receiverId:s.contact.contact.localId,message:e,timestamp:o},c=i;c.type="sent",n("storeMessage",c),localStorage.setItem("contactMessages",JSON.stringify(a.contactMessages)),I.a.database().ref("messages").push(i).then((function(t){console.log(t),r("fetchMessages"),n("switchToUserMessages")})).catch((function(t){return console.log(t)}))},fetchMessages:function(t){var e=t.rootState,s=t.commit,n=t.dispatch;I.a.database().ref("messages").on("value",(function(t){var r=[],o=t.val();for(var i in o){var c=o[i];r.push(c)}var l=e.user.user.localId,u=a("2ef0"),d=r.filter((function(t){return t.receiverId===l||t.senderId===l})).map((function(t){var e=t.senderId===l?t.receiverId:t.senderId;return e}));if(d.length){var p=u.uniq(d,"localId").filter((function(t){return t!==l})),m=[];p.forEach((function(t){var a=e.users.users.find((function(e){return e.localId===t}));m.push(a)})),m.forEach((function(t){var e=r.filter((function(e){return e.receiverId===t.localId&&e.senderId===l||e.receiverId===l&&e.senderId===t.localId})),a=e.filter((function(t){return t.senderId===l}));a.forEach((function(t){return t.type="sent"}));var s=e.filter((function(t){return t.receiverId===l}));s.forEach((function(t){return t.type="received"}));var n=a.concat(s);t.messages=n.sort((function(t,e){return e.timestamp-t.timestamp}));var o=n.sort((function(t,e){return t.timestamp-e.timestamp}));t.lastTimestamp=o[o.length-1].timestamp})),s("storeContacts",m),localStorage.setItem("contacts",JSON.stringify(m));var f=r.filter((function(t){return t.receiverId===l||t.senderId===l})),_=f[f.length-1],h=_.senderId===l?_.receiverId:_.senderId,g=m.find((function(t){return t.localId===h}));if(n("chatWithContact",g),e.auth.initLogin){var v=g.name;Et.push("/chat/"+v),e.auth.initLogin=!1}}e.auth.initLogin&&(Et.push("/chat"),e.auth.initLogin=!1)}))}},he={state:pe,getters:me,mutations:fe,actions:_e};s["a"].use(i["a"]);var ge=new i["a"].Store({modules:{auth:Ft,user:Ht,users:Qt,contact:ee,contacts:oe,lists:de,messages:he}}),ve=ge,be=a("7bb1"),ye=(a("d3b7"),a("ddb0"),a("a925"));function we(){var t=a("49f8"),e={};return t.keys().forEach((function(a){var s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){var n=s[1];e[n]=t(a)}})),e}s["a"].use(ye["a"]);var Ce=new ye["a"]({locale:"en",fallbackLocale:"en",messages:we()}),Ie=a("a65d"),Oe=a.n(Ie);a("fb6a");s["a"].filter("setTimeHourMinutes",(function(t){var e=t.length-1,a=t[e].timestamp,s=new Date(a),n=s.getHours(),r="0".concat(s.getMinutes()),o="".concat(n,":").concat(r.substr(-2));return o})),s["a"].filter("sliceMessage",(function(t){var e=t.length-1;return t[e].message.slice(0,14)+".."}));var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("the-navbar"),t._t("default"),a("switch-language",{attrs:{position:"bottom"}})],2)},ke=[],Se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"switch__trad",class:{"switch__trad__top-right":t.positionTop,"switch__trad__bottom-right":t.positionBottom}},[s("a",{staticClass:"switch__trad--en",on:{click:t.swithToEnglish}},[s("img",{staticClass:"switch__trad__icon",class:{"trad-active":!t.isActive},attrs:{src:a("6bf7"),alt:"Flag USA"}})]),s("a",{staticClass:"switch__trad--fr",on:{click:t.swithToFrench}},[s("img",{staticClass:"switch__trad__icon",class:{"trad-active":t.isActive},attrs:{src:a("9baf"),alt:"Flag FR"}})])])},je=[],Te=(a("c975"),{data:function(){return{isActive:!1}},props:{position:{type:String,default:null,required:!0,validator:function(t){return-1!==["bottom","top"].indexOf(t)}}},computed:{positionTop:function(){return"top"===this.position},positionBottom:function(){return"bottom"===this.position}},methods:{swithToEnglish:function(){this.$i18n.locale="en",this.switchActive()},swithToFrench:function(){this.$i18n.locale="fr",this.switchActive()},switchActive:function(){this.isActive=!this.isActive}}}),De=Te,$e=(a("c36b"),Object(u["a"])(De,Se,je,!1,null,"46f1aac0",null)),Me=$e.exports,Ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar"},[s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"navbar__img",attrs:{src:a("cf05"),alt:"logo-icon"}})]),s("div",[t.isAuth?t._e():s("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v(" "+t._s(t.$t("button.login"))+" ")]),t.isAuth?t._e():s("router-link",{staticClass:"link",attrs:{to:"/signup"}},[t._v(" "+t._s(t.$t("button.signup"))+" ")]),t.isAuth?s("router-link",{staticClass:"link",attrs:{to:t.linkChat}},[t._v(" "+t._s(t.$t("button.chat"))+" ")]):t._e(),t.isAuth?s("button",{staticClass:"link",on:{click:t.logoutAndRedirect}},[t._v(" "+t._s(t.$t("button.logout"))+" ")]):t._e()],1)],1)},Ue=[],Pe={name:"TheNavbar",computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])(["isAuth","contact"])),{},{linkChat:function(){return this.contact?"/chat/"+this.contact.name:"/chat"}}),methods:Object(o["a"])(Object(o["a"])({},Object(i["d"])({logout:"logout"})),{},{logoutAndRedirect:function(){this.logout()}})},Ne=Pe,Le=(a("0980"),Object(u["a"])(Ne,Ee,Ue,!1,null,"4ebbdd47",null)),Ae=Le.exports,qe={name:"LayoutDefault",components:{TheNavbar:Ae,SwitchLanguage:Me}},Fe=qe,ze=Object(u["a"])(Fe,xe,ke,!1,null,null,null),Je=ze.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"background-chat"}),t._t("default"),a("switch-language",{attrs:{position:"top"}})],2)},Be=[],He={name:"LayoutChat",components:{SwitchLanguage:Me}},We=He,Ve=(a("86d2"),Object(u["a"])(We,Re,Be,!1,null,"19f10d17",null)),Ge=Ve.exports;s["a"].config.productionTip=!1,s["a"].use(be["a"]),s["a"].use(Oe.a,{iconPack:"fontawesome"}),s["a"].component("default-layout",Je),s["a"].component("chat-layout",Ge);var Ke=new s["a"],Qe={apiKey:"AIzaSyCGkv9-83v6LsQRhClROTowTL6rK5YcPI8",authDomain:"message-app-719f5.firebaseapp.com",databaseURL:"https://message-app-719f5.firebaseio.com",projectId:"message-app-719f5",storageBucket:"message-app-719f5.appspot.com",messagingSenderId:"114576309871",appId:"1:114576309871:web:bc8e8f4dfdee99f352d79a"};I.a.initializeApp(Qe),new s["a"]({router:Et,store:ve,i18n:Ce,render:function(t){return t(p)}}).$mount("#app")},"5d81":function(t,e,a){t.exports=a.p+"img/eye-password.4b4cf493.svg"},"5e5f":function(t,e,a){},"5f66":function(t,e,a){t.exports=a.p+"img/chat.8fc2dcfe.svg"},"6bf7":function(t,e,a){t.exports=a.p+"img/flag-us.38f88714.svg"},"6c16":function(t,e,a){},7770:function(t,e,a){},"7faf":function(t,e,a){"use strict";var s=a("b8ff"),n=a.n(s);n.a},"7fb1":function(t,e,a){},8076:function(t,e,a){},"83c2":function(t,e,a){},"86d2":function(t,e,a){"use strict";var s=a("83c2"),n=a.n(s);n.a},9262:function(t,e,a){},"9baf":function(t,e,a){t.exports=a.p+"img/flag-fr.684cc20f.svg"},"9f22":function(t,e,a){"use strict";var s=a("8076"),n=a.n(s);n.a},ad0d:function(t,e,a){t.exports=a.p+"img/send.317b15cf.svg"},b011:function(t,e,a){"use strict";var s=a("6c16"),n=a.n(s);n.a},b446:function(t,e,a){"use strict";var s=a("9262"),n=a.n(s);n.a},b8ff:function(t,e,a){},c36b:function(t,e,a){"use strict";var s=a("f69b"),n=a.n(s);n.a},cafe:function(t,e,a){var s={"./eye-password.svg":"5d81","./eye-text.svg":"4aeb"};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id="cafe"},cb44:function(t,e,a){"use strict";var s=a("0b2b"),n=a.n(s);n.a},ce96:function(t,e,a){"use strict";var s=a("7fb1"),n=a.n(s);n.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.7ddcdbf3.png"},cfab:function(t,e,a){"use strict";var s=a("e991"),n=a.n(s);n.a},d737:function(t,e,a){t.exports=a.p+"img/cloud-girl.56aa2ad8.png"},dac7:function(t,e,a){t.exports=a.p+"img/default-user.4140fefe.png"},dd45:function(t,e,a){t.exports=a.p+"img/hello.92b2d250.png"},e901:function(t,e,a){"use strict";var s=a("0cea"),n=a.n(s);n.a},e991:function(t,e,a){},edd4:function(t){t.exports=JSON.parse('{"homepage":{"header":"Connect with friends <br> in real time","communication":"Fast. Simple. Free.","description":"Bolt is a fresh platform to communicate with your friends with instant messages. Once you are signed in, find a friend thanks to its phone number and start chatting !"},"button":{"onboarding":"Get Started","logout":"Logout","login":"Login","signup":"Signup","chat":"Chat"},"signup":{"title":"Please fill this form","placeholder":{"name":"Enter your name..","surname":"Enter your surname..","phone":"Enter your phone..","email":"Enter your email..","password":"Enter your password.."}},"login":{"title":"Signup","placeholder":{"email":"Enter your email..","password":"Enter your password.."}},"chat":{"list":{"label":"Find New Contacts","placeholder":"Enter a phone number.."},"typing":"Type your message here..","onboarding":{"welcome":"Welcome","subline":"Find contacts and start chatting !"}},"error":{"404":"The page you are looking for does not exist !"}}')},f629:function(t,e,a){},f693:function(t){t.exports=JSON.parse('{"homepage":{"header":"Connecte avec tes amis <br> en temps réel","communication":"Simple. Rapide. Gratuit.","description":"Bolt est une plateforme pour communiquer avec tes amis avec des messages instantanés. Une fois connecté(e), trouve tes amis grâce à leur numéro mobile et commence à chatter !"},"button":{"onboarding":"Essaie maintenant","logout":"Déconnexion","login":"Connexion","signup":"S\'inscire","chat":"Chat"},"signup":{"title":"Veuillez remplir ce formulaire","placeholder":{"name":"Entrez votre prénom..","surname":"Entrez votre nom..","phone":"Entrez votre numéro mobile..","email":"Entrez votre email..","password":"Entrez votre mot de passe.."}},"login":{"title":"Inscription","placeholder":{"email":"Entrez votre email..","password":"Entrez votre mot de passe.."}},"chat":{"list":{"label":"Trouve de Nouveaux Contacts","placeholder":"Entrez un numéro mobile.."},"typing":"Ecrivez un message..","onboarding":{"welcome":"Bienvenu","subline":"Trouve des contacts et commence à chatter !"}},"error":{"404":"La page que vous recherchez n\'existe pas !"}}')},f69b:function(t,e,a){}});
//# sourceMappingURL=app.3995d722.js.map